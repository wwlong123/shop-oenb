(self.AMP=self.AMP||[]).push({n:"amp-gwd-animation",v:"1810312337520",f:(function(AMP,_){
var f,g="function"==typeof Object.create?Object.create:function(a){function b(){}b.prototype=a;return new b},k;if("function"==typeof Object.setPrototypeOf)k=Object.setPrototypeOf;else{var l;a:{var m={a:!0},n={};try{n.__proto__=m;l=n.a;break a}catch(a){}l=!1}k=l?function(a,b){a.__proto__=b;if(a.__proto__!==b)throw new TypeError(a+" is not extensible");return a}:null}var p=k;function r(a){if(!a)return[];for(var b=Array(a.length),c=0;c<a.length;c++)b[c]=a[c];return b};self.log=self.log||{user:null,dev:null,userForEmbed:null};var t=self.log;function u(){if(!t.user)throw Error("failed to call initLogConstructor");return t.user};var v=Object.prototype.hasOwnProperty;/*
 https://mths.be/cssescape v1.5.1 by @mathias | MIT license */
var w=/(\0)|^(-)$|([\x01-\x1f\x7f]|^-?[0-9])|([\x80-\uffff0-9a-zA-Z_-]+)|[^]/g;function x(a,b,c,d,e){return e?e:b?"\ufffd":d?a.slice(0,-1)+"\\"+a.slice(-1).charCodeAt(0).toString(16)+" ":"\\"+a};var z=["animationend","webkitAnimationEnd"];function A(a){var b=this;this.c=a;this.h=this.o.bind(this);this.c.whenBodyAvailable().then(function(){for(var a=0;a<z.length;a++)b.c.getBody().addEventListener(z[a],b.h,!0);b.setCurrentPage(0)})}f=A.prototype;f.setEnabled=function(a){this.c.getBody().classList.toggle("i-amphtml-gwd-animation-disabled",!a)};
f.setCurrentPage=function(a){var b=this.c.getRootNode().querySelectorAll("."+"gwd-page-wrapper".replace(w,x));if(0!=b.length){var c=this.c.getRootNode().querySelector("."+"gwd-page-wrapper".replace(w,x)+"."+"gwd-play-animation".replace(w,x));c&&B(c);var d=b[a];d?d.classList.add("gwd-play-animation"):u().error("GWD","Could not find page with index "+a+".")}};
function B(a){a.classList.remove("gwd-play-animation");[a].concat(r(a.querySelectorAll("*"))).forEach(function(a){a.classList.remove("gwd-pause-animation");if(a.hasAttribute("data-gwd-label-animation")){var b=a.getAttribute("data-gwd-label-animation");a.classList.remove(b);a.removeAttribute("data-gwd-label-animation")}delete a.__AMP_GWD_GOTO_COUNTERS__})}f.play=function(a){(a=this.getReceiver(a))&&a.classList.remove("gwd-pause-animation")};f.pause=function(a){(a=this.getReceiver(a))&&a.classList.add("gwd-pause-animation")};
f.togglePlay=function(a){(a=this.getReceiver(a))&&a.classList.toggle("gwd-pause-animation")};f.gotoAndPlay=function(a,b){(a=this.getReceiver(a))&&C(a,b)};f.gotoAndPause=function(a,b){var c=this,d=this.getReceiver(a);d&&(C(d,b),this.c.win.setTimeout(function(){c.pause(a)},40))};
f.gotoAndPlayNTimes=function(a,b,c,d){if(0>=c)u().error("GWD","Invalid maxCount parameter: "+c);else if(d){if(a=this.getReceiver(a)){var e=d+"_"+b,h=a.__AMP_GWD_GOTO_COUNTERS__&&v.call(a.__AMP_GWD_GOTO_COUNTERS__,e)?a.__AMP_GWD_GOTO_COUNTERS__[e]:0;h<c&&(C(a,b),a.__AMP_GWD_GOTO_COUNTERS__||(a.__AMP_GWD_GOTO_COUNTERS__={}),v.call(a.__AMP_GWD_GOTO_COUNTERS__,e)||(a.__AMP_GWD_GOTO_COUNTERS__[e]=0),a.__AMP_GWD_GOTO_COUNTERS__[e]=h+1)}}else u().error("GWD","Event name required but not specified.")};
f.getReceiver=function(a){if("document.body"==a)return this.c.getBody();var b=this.c.getRootNode().getElementById(a);if(b&&b.classList)return b;u().error("GWD","Could not get receiver with id "+a+".");return null};function C(a,b){a.classList.remove("gwd-pause-animation");var c=a.getAttribute("data-gwd-label-animation");c&&(a.classList.remove(c),a.removeAttribute("data-gwd-label-animation"));a.classList.add(b);a.setAttribute("data-gwd-label-animation",b)}
f.o=function(a){var b=a.target.getAttribute("data-event-name");if(b){a={eventName:b,sourceEvent:a};var c=this.c.win,d={detail:a};Object.assign(d,void 0);"function"==typeof c.CustomEvent?a=new c.CustomEvent("gwd.timelineEvent",d):(c=c.document.createEvent("CustomEvent"),c.initCustomEvent("gwd.timelineEvent",!!d.bubbles,!!d.cancelable,a),a=c);var e=a;this.c.getRootNode().dispatchEvent(e)}};f.dispose=function(){for(var a=0;a<z.length;a++)this.c.getBody().removeEventListener(z[a],this.h,!0)};function D(a){if(a.nodeType){var b=(a.ownerDocument||a).defaultView;if(b=b!=(b.__AMP_TOP||b)&&E(b,"action")?F(b,"action"):null)return b}b=G(a);b=H(b);return F(b,"action")}function I(a){var b=G(a);b=H(b);return F(b,"gwd")}function G(a){if(a.nodeType){var b=(a.ownerDocument||a).defaultView;b=b.__AMP_TOP||b;a=F(b,"ampdoc").getAmpDoc(a)}return a}function H(a){a=G(a);return a.isSingleDoc()?a.win:a}
function F(a,b){E(a,b);var c=a.services;c||(c=a.services={});var d=c;a=d[b];a.obj||(a.obj=new a.ctor(a.context),a.ctor=null,a.context=null,a.resolve&&a.resolve(a.obj));return a.obj}function E(a,b){a=a.services&&a.services[b];return!(!a||!a.ctor&&!a.obj)};var J={play:["args.id"],pause:["args.id"],togglePlay:["args.id"],gotoAndPlay:["args.id","args.label"],gotoAndPause:["args.id","args.label"],gotoAndPlayNTimes:["args.id","args.label","args.N","event.detail.eventName"],setCurrentPage:["args.index"]};function K(a){a=AMP.BaseElement.call(this,a)||this;a.l="";a.j=a.w.bind(a);return a}var L=AMP.BaseElement;K.prototype=g(L.prototype);K.prototype.constructor=K;
if(p)p(K,L);else for(var M in L)if("prototype"!=M)if(Object.defineProperties){var N=Object.getOwnPropertyDescriptor(L,M);N&&Object.defineProperty(K,M,N)}else K[M]=L[M];K.A=L.prototype;
K.prototype.buildCallback=function(){this.l=this.element.getAttribute("timeline-event-prefix")||"";this.getAmpDoc().getRootNode().addEventListener("gwd.timelineEvent",this.j,!0);var a=this.getAmpDoc().getRootNode().getElementById("pagedeck");if(a){u().assert(this.element.id,"The amp-gwd-animation element must have an id.");var b=this.element.id+".setCurrentPage(index=event.index)",c=this.getAmpDoc(),d=a,e=b;var h=d.getAttribute("on")||"";var q=h.indexOf("slideChange:");-1!=q?(q+=12,h=h.substr(0,q)+
e+","+h.substr(q)):(h&&(h+=";"),h+="slideChange:"+e);D(c).setActions(d,h)}c=this.m.bind(this);for(var O in J)this.registerAction(O,c)};K.prototype.m=function(a){var b=a;if("setCurrentPage"==b.method){var c=this.getAmpDoc().getRootNode().getElementById("pagedeck");b=c&&b.source==c}else b=!0;b&&P(this,a)};
function P(a,b){a=u().assert(I(a.getAmpDoc()),"Cannot execute action because the GWD service is not registered.");var c=J[b.method],d=c.map(function(a){for(var c=a.split("."),d=b,e=0;e<c.length;e++){var y=c[e];if(y&&d&&void 0!==d[y])d=d[y];else{d=void 0;break}}return d});a[b.method].apply(a,d)}K.prototype.w=function(a){D(this.getAmpDoc()).trigger(this.element,""+this.l+a.detail.eventName,a,100)};
K.prototype.detachedCallback=function(){this.getAmpDoc().getRootNode().removeEventListener("gwd.timelineEvent",this.j,!0);return!0};(function(a){a.registerServiceForDoc("gwd",A);a.registerElement("amp-gwd-animation",K,".i-amphtml-gwd-animation-disabled [class*=-animation],.i-amphtml-gwd-animation-disabled [class*=gwdanimation]{-webkit-animation:none!important;animation:none!important}\n/*# sourceURL=/extensions/amp-gwd-animation/0.1/amp-gwd-animation.css*/")})(self.AMP);
})});
//# sourceMappingURL=amp-gwd-animation-0.1.js.map

